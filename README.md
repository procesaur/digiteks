![](static/cover.png)

#### ДигиТекс је вишеплатформна апликација за дигитализацију докумената на српском језику, заснована на оптичком препознавању карактера и језичким моделима за српски језик.

#### Документ који је предмет дигитализације се најпре трансформише у слику помоћу [Поплера](https://poppler.freedesktop.org/), док је за препознавање текста на слици задужен [Гугл Тесеракт](https://github.com/tesseract-ocr/tesseract). Коначно, текст се обрађује језичким моделом за српски језик, што омогућава прецизније одређивање вероватноће сваке речи у контексту, као и аутоматско исправљање лоше рашчитаног текста.

#### Дигитекс се може покретати као [Фласк](https://flask.palletsprojects.com/) веб апликација на рачунарима са различитим оперативним системима, за шта је неопходно инсталирати [Пајтон 3.12](https://www.python.org/downloads/release/python-3120/), или се може скинути и покренути компајлована верзија која у себи садржи неопходан софтвер (за Виндоус оперативне системе).

## Функционланости у верзији 1.03

### Рад са документима
1. Учитавање докумената припремљених у виду јединствене ПДф датотеке или ЗИП датотеке са сликама страна;
2. Датотека се у сваком случају претвара у низ слика, које се аутоматски побољшавају (препознавање и уклањање артефакта, увеличавање, исправљање неповољне ротације);
3. Преузимање парова оригиналних и побољшаних слика путем интерфејса.


### Аутоматско рашчитавање текста

1. Одабир модела за оптичко препознавање карактера: српска ћирилица, српска латиница, ћирилица + латиница (подразумевано);
2. Оптичко препознавање на клик, паралелно на процесору, са аутоматским препознавањем броја језгара/нити за оптималну брзину.

### Препроцесирање рашчитаног документа

1. Рашчитани документ (у ХОЦР) формату се препроцесира, при чему се за сваки параграф одређује припадност по ступцима, маргине и поравнање, а те информације се уграђују у документ;
2. За речи у документу се такође утврђују позиције и одређују маргине, како би се пронашли кандидати за спајање прелома;
3. Препознате преломљене речи се аутоматки спајају;
4. Упаривање препознатог текста са сликама.

### Обрада помоћу језичког модела

1. Речи из документа се класификују према поузданости рашчитавања, а непоуздани кандидати се додатно проверавају у контексту, како би се израчунале нове поузданости тачности;
2. Непоуздане речи се процесирају у максималном контексту како би се произвели могући кандидати за исправак. Кандидати се упоређују са оригиналном ниском, како би се одабрао адекватан исправак, уколико постоји;
3. Излаз језичког модела се комбинује са оригиналним документом, при чему се он обогаћује информацијама о новим вероватноћама и евентуалним исправкама.

### Интерфејс за даљу обраду

1. Документ се током обраде учитава у интерфејс страну по страну;
2. Пре приказивања, интерфејс обогаћује документ додатним кућицама (по једна за сваки параграф и сваку линију), које омогућавају групну обраду са неколико функција: померање горе доле, брисање и обележавање као добро препознато;
3. Исправљене речи обележене су плавом бојом, несигурне жутом, а параграфи који се не уклапају ни у један ступац црвеном бојом, при чему је кроз интерфејс могуће подесити граничну вероватноћу за обележавање као и сатурацију маркера;
4. Свака проверена (кликнута) реч се обележава као исправна;
5. Речи се могу директно исправљати, при чему су исправке обележене зеленом бојом;
6. У сваком тренутку се документ може сачувати, и у сваком тренутку се може учитати претходно сачувани документ;
7. Документ се поред чувања у овом, ДигиТекс формату, може сачувати и као текст или ХТМЛ.


# Покретање апликације

## Виндоус апликација

Скините прекомпајловану апликацију доступну на [Гитхаб репозиторијуму софтвера](https://github.com/procesaur/digiteks/releases) и покрените програм на вашем рачунару.


## Виндоус (командна линија, ваше Пајтон окружење)
1. Преузмите апликацију у целости и сачувајте је на вашем рачунару.

2. Инсталирајте Пајтон интерпретер (препоручена верзија 3.12) 

3. У командној линији подесите радно окружење на директоријум у којем је похрањен преузети софтвер
```console
cd ./direktorijum/digiteks/softvera
```

4. Инсталиратје неопходне Пајтон пакете
```console
pip install -r requirements.txt
```

5. Преузмите инсталацију пакета _tesserocr_ за вашу верзију Пајтон интерпретера на [овој адреси](https://github.com/simonflueckiger/tesserocr-windows_build/releases)

6. Инсталирајте преузети пакет (_tesserocr_) 
```console
pip install <путања/преузетог/пакета/име>.whl
```

5. Покрените апликацију
```console
python main.py
```

## Linux (командна линија, ваше Пајтон окружење)
1. Преузмите апликацију у целости и сачувајте је на вашем рачунару.

2. Инсталирајте Пајтон интерпретер (препоручена верзија 3.12) 

3. У командној линији подесите радно окружење на директоријум у којем је похрањен преузети софтвер
```console
cd ./direktorijum/digiteks/softvera
```

4. Инсталиратје неопходне Пајтон пакете
```console
pip install -r requirements.txt
```

5. Инсталирајте _Tesseract_
```console
sudo apt-get install tesseract-ocr libtesseract-dev libleptonica-dev pkg-config
```

6. Инсталирајте _Poppler_
```console
sudo apt-get install -y poppler-utils
```

7. Инсталирајте пакет (_tesserocr_) 
```console
pip install tesserocr
```

8. Покрените апликацију
```console
python main.py
```

## _apache_ веб апликација (_Linux_ пример)
1. Преузмите апликацију у целости и сачувајте је на вашем рачунару (нпр. у директоријуму _var/www/digiteks_).

2. Инсталирајте Пајтон интерпретер (препоручена верзија 3.12) 

3. У командној линији подесите радно окружење на директоријум у којем је похрањен преузети софтвер
```console
cd ./direktorijum/digiteks/softvera
```

4. Инсталиратје неопходне Пајтон пакете
```console
sudo -H pip3 install -r requirements.txt
```

5. Инсталирајте _Tesseract_
```console
sudo apt-get install tesseract-ocr libtesseract-dev libleptonica-dev pkg-config ffmpeg libsm6 libxext6
```

6. Инсталирајте _Poppler_
```console
sudo apt-get install -y poppler-utils
```

7. Инсталирајте пакет (_tesserocr_) 
```console
sudo -H pip3 install tesserocr
```

8. Инсталација и подешавање _apache_ веб сервера

```console
sudo apt install apache2
apache2 -v
sudo apt-get install libapache2-mod-wsgi-py3
sudo a2enmod rewrite
sudo a2enmod wsgi
sudo nano /etc/apache2/sites-available/digiteks.conf
```

У конфигурациону датотеку упишите:

```apache
<VirtualHost *:5001>

WSGIDaemonProcess digiteks user=www-data group=www-data threads=5
        WSGIScriptAlias / /var/www/digiteks/digiteks.wsgi

        <Directory /var/www/digiteks>
                WSGIProcessGroup digiteks
                WSGIApplicationGroup %{GLOBAL}
                Order deny,allow
                Allow from 127.0.0.1 ::1/128 <ADRESA SERVERA>
        </Directory>
</VirtualHost>

```

sudo nano /etc/apache2/ports.conf
```apache
Listen 5001
```

Урадите неопходно ажурирање и рестарт сервиса

```console
sudo a2ensite digiteks
sudo service apache2 restart
```

и апликација ће бити покренута и доступна на порту 5001

# Предстојећи кораци:
1. Додатна унапређења у виду бољег препознавања текста и структуре документа.


# Напомене

#### Развој апликације, у сарадњи са *ЈП Службени Гласник*, омогућио је програм *Говтех*, који финансира *Фонд за иновациону делатност Републике Србије*.

